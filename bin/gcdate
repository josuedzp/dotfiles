#!/usr/bin/env bash

usage() { echo "Usage: $0 -d <date> -m <message>" 1>&2; exit 1; }

while getopts ":d:m:" o; do
  case "${o}" in
    d)
      d=$OPTARG
      if ! date -d "$d" >/dev/null ; then
        echo "Not valid date"
        usage
      fi
    ;;
    m)
      m=$OPTARG
    ;;
    *)
      usage
    ;;
    esac
done
shift $((OPTIND-1))

if [ -z "${d}" ] || [ -z "${m}" ]; then
  usage
fi

date=$(date -d "${d}")
echo $date
# GIT_AUTHOR_DATE="$d" GIT_COMMITTER_DATE="$d" 
# git commit --date "${d}" -m $m
